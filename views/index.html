<!-- use this file to test your `jsonpRequest` method but...-->
<!-- DO NOT MODIFY THIS FILE. not even a little. -->
<!-- doing so might prevent your code from being properly tested -->
<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>ROCKUS</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>

<body>
    <div id="container">
        <div>HELLO1</div>
        <div>
            <audio id="audioPlayer" controls/>
            <br>
            <br>
            <br>
        </div>
        <div>HELLO2</div>
        <audio id="audioPlayer2" controls/>
    </div>
    <div>HELLO3</div>
    <div>
        <audio id="audioPlayer3" controls/>
        <br>
        <br>
        <br>
    </div>
    <div>HELLO4</div>
    <div>
        <audio id="audioPlayer4" controls/>
    </div>
    </div>
    <select id="genre">
        <option value="rock80s">80s Rock</option>
        <option value="classical">Classical</option>
    </select>
    <button id="begin">BEGIN</button>
    <div>
        <ul class='answers'>
        </ul>
    </div>
    <form action="#" id="send" method="post">
        <input type="text" name="message" id="message" />
        <input type="submit" name="submit" class="submit" />
    </form>
</body>
<script>
$(document).ready(function() {

    var songs;

    $("#begin").on('click', function() {
        if ($( "#genre option:selected" ).text() == "Classical") {
          var message = {"text": "classical"};
          alert("CLASSICAL CHOSEN");
            $.ajax({
              type: 'POST',
              url: server + "musicchoice",
              data: JSON.stringify(message),
              contentType: 'application/json',
              success: function(json) {
                songs = JSON.parse(json);

                playAudio('audioPlayer', songs[0]);
                playAudio('audioPlayer2', songs[1]);
                playAudio('audioPlayer3', songs[2]);
                playAudio('audioPlayer4', songs[3]);
              
              }
            });
        }

    });

    $("#send").submit(function(e) {
        e.preventDefault();
        var result = $('#message').val();
        var message = {
            "text": result
        };
        $.ajax({
            type: 'POST',
            url: server,
            data: JSON.stringify(message),
            contentType: 'application/json',
            success: function(json) {
                    console.log(json);
                    if (json === "Right") {

                        $('.answers').append('<li>' + json + '</li>');
                    }
                }
        });

    });

    var playAudio = function(player, songObject) {
        console.log("Do we get here");
        player = '#' + player;
        $(player).attr('src', songObject.title);
        $(player).prop('currentTime', songObject.start);
        $(player).prop('volume', songObject.volume);
        $(player).trigger('play');
    };


    var server = "http://127.0.0.1:3000/";


});
</script>

</html>
